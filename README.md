# xsf-simple-cache

## 项目简介

基于多种页面替换策略的线程安全缓存。

| 名称             | 说明                                                                                                                   |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------- |
| XSFCache         | 接口，要求实现put、get两个方法。                                                                                       |
| XSFLruCache      | LRU缓存类，使用最近最少使用算法，置换最近最久未使用的缓存数据。                                                        |
| XSFLruKCache     | LRU-k缓存类，改进LRU算法，置换最近k次访问最久未使用的缓存数据。                                                        |
| XSFLfuCache      | LFU缓存类，使用最不经常使用算法，置换使用频率最小的缓存数据。                                                          |
| XSFLfuAgingCache | LFU-aging缓存类，改进LFU算法，当访问次数平均值大于阈值时将所有访问次数减去阈值的一半，从而实现老化。                   |
| XSFArcCache      | ARC缓存类，使用自适应缓存替换算法，可根据不同访问模式动态调整缓存策略，结合了LRU算法和LFU算法的优点。                  |
| XSFShardedCache  | 基于哈希的分片缓存，利用hash机制对全量数据做分片处理，将缓存数据分散到若干个子缓存上。子缓存可采用上述任一具体缓存类。 |

## 缓存淘汰策略对比

| 缓存淘汰策略                      | 优势                                                         | 缺陷                                                         | 应用场景                                                     |
| --------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| LRU（Least Recently Used）        | - 实现简单，基于时间的自然访问淘汰策略<br>- 适合短期热点数据，命中率高<br>- 易于于其他缓存机制结构结合（如双链表实现） | - 循环缓存问题：对于扫描型访问，可能频繁淘汰热点数据，导致缓存抖动<br>- 不能很好处理长期热点数据和周期性热点数据 | 适合访问模式稳定、短期热点突出的场景，如:<br><br>web 缓存（浏览器页面）<br>- 文件系统缓存（例如内存有限的小型文件系统）<br>- 数据库的缓冲区管理（访问历史稳定） |
| LFU（Least Frequenty Used）       | - 更关注访问频率，能够保留长期使用的重要数据。<br>- 对稳定热点数据的命中率更高 | - 冷启动问题：新数据可能在尚未证明重要性前被淘汰<br>- 数据频率统计更新有额外的开销<br>- 不适合访问模式变化频繁的场景 | 适合访问频率稳定、长期热点数据占主导的场景，如：<br><br>- 热门资源（视频、音乐）的推荐系统缓存<br>- 机器学习中训练数据的缓存 |
| ARC（Adaptive Replacement Cache） | - 结合 LRU 和 LFU 的优点，动态调整策略以适应短期和长期热点。<br>- 抗抖动能力强，能快速适应缓存 模式的变化。<br>- 高命中率，适合多样化的访问模式 | - 实现复杂，涉及较多数据结构，开销大<br>- 动态调整 LFU 和 LRU 缓存比例增加了计算成本。 | 适合访问模式多变的场景：<br><br>- 数据库缓冲区管理<br>- 文件系统缓存（如 ZFS）<br>- 混合型访问模式（扫描 + 热点）的应用 |
